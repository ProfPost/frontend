import{F as Pe,O as mt,Q as dt,R as ut,S as ft,T as ht,U as gt,V as _t,W as re,X as oe,Y as bt,Z as vt,aa as ae,ba as St,c as k,ca as se,d as ie,da as ce,f as T,g as nt,i as W,j as it,k as rt,l as ot,m as at,n as st,o as ct,oa as q,p as lt,pa as xt,q as N,r as pt}from"./chunk-WTALAJB6.js";import{a as w,f as Xe,g as Ze,h as et,i as U,j as tt,n as y,p as ne}from"./chunk-TCVV5XCJ.js";import{$b as Ge,Aa as Z,Ab as E,Ba as De,Cc as te,D as Ee,Db as h,Dc as R,Fb as f,Fc as Qe,Gb as We,Gc as Ke,H as Oe,Hb as qe,K as Fe,P as Re,Qb as c,Rb as _,Sa as j,Sb as O,Ta as Le,Tb as z,Ub as H,Vb as $,W as X,Wa as l,Xa as M,Xb as S,Z as I,Zb as Ye,_ as Ue,_b as J,a as be,aa as ve,ac as xe,ca as D,da as m,e as we,ha as b,ia as ke,ib as Ae,ka as Te,lb as v,lc as Je,o as V,ob as Ve,p as ye,pb as u,qa as x,qb as Be,ra as C,rb as je,s as B,tb as ee,ub as ze,uc as Ce,va as Ne,vb as He,wb as $e,xb as s,y as Me,ya as Se,yb as a,zb as g}from"./chunk-5B7RBOYN.js";var le=class n{baseURL=`${y.baseURL}/plans`;http=m(w);getPlans(){return this.http.get(`${this.baseURL}`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function Tt(n,r){if(n&1){let e=E();s(0,"div",1)(1,"div",2)(2,"button",3),h("click",function(){x(e);let i=f();return C(i.closePopup())}),c(3,"\xD7"),a(),s(4,"h3"),c(5,"Completar compra"),a(),s(6,"p"),c(7,"Resumen de compra:"),a(),s(8,"div",4)(9,"span"),c(10,"Suscripci\xF3n a:"),a(),s(11,"span"),c(12),a()(),s(13,"div",4)(14,"span"),c(15,"Tipo de plan:"),a(),s(16,"span"),c(17),a()(),s(18,"div",4)(19,"span"),c(20,"Se renueva cada:"),a(),s(21,"input",5),$("ngModelChange",function(i){x(e);let o=f();return H(o.selectedMonths,i)||(o.selectedMonths=i),C(i)}),h("input",function(){x(e);let i=f();return C(i.calculateTotalPrice())}),a(),s(22,"span"),c(23,"mes(es)"),a()(),s(24,"div",4)(25,"span"),c(26,"Precio:"),a(),s(27,"span"),c(28),J(29,"number"),a()(),s(30,"div",6)(31,"span"),c(32,"M\xE9todo de pago:"),a(),g(33,"img",7),s(34,"span",8),c(35,"Seguro"),a()(),s(36,"button",9),h("click",function(){x(e);let i=f();return C(i.continueSubscription())}),c(37,"Siguiente"),a(),s(38,"p",10),c(39),a()()()}if(n&2){let e=f();l(12),_(e.userName),l(5),_(e.planName),l(4),z("ngModel",e.selectedMonths),l(7),O("$ ",xe(29,5,e.totalPrice,"1.2-2"),""),l(11),O("Esta suscripci\xF3n apoya de forma directa a ",e.userName,".")}}function Nt(n,r){if(n&1){let e=E();s(0,"div",1)(1,"div",2)(2,"button",3),h("click",function(){x(e);let i=f();return C(i.closePopup())}),c(3,"\xD7"),a(),s(4,"h3"),c(5,"A un paso de completar tu compra"),a(),s(6,"p"),c(7,"Resumen total:"),a(),s(8,"div",4)(9,"span"),c(10,"Total:"),a(),s(11,"span"),c(12),J(13,"number"),a()(),s(14,"div",6)(15,"span"),c(16,"M\xE9todo de pago:"),a(),g(17,"img",7),s(18,"span",8),c(19,"Seguro"),a()(),s(20,"button",9),h("click",function(){x(e);let i=f();return C(i.redirectToPayPal())}),c(21,"Ir a PayPal"),a()()()}if(n&2){let e=f();l(12),O("$ ",xe(13,1,e.totalPrice,"1.2-2"),"")}}var pe=class n{userName="";userId=0;creatorId=0;planName="";planPrice=0;planId=0;selectedMonths=1;totalPrice=0;isPopupVisible=!0;isPaymentConfirmationVisible=!1;popupClosed=new Se;redirect=new Se;ngOnInit(){this.loadSubscriptionData(),this.calculateTotalPrice()}loadSubscriptionData(){let r=JSON.parse(localStorage.getItem("selectedUser")||"{}"),e=JSON.parse(localStorage.getItem("selectedPlan")||"{}"),t=JSON.parse(localStorage.getItem("profpost_auth")||"{}");this.creatorId=r.userId,this.userName=r.userName,this.userId=t.id,this.planName=e.name,this.planId=e.id,this.planPrice=e.price,this.calculateTotalPrice()}calculateTotalPrice(){this.totalPrice=this.selectedMonths*this.planPrice}continueSubscription(){this.isPopupVisible=!1,this.isPaymentConfirmationVisible=!0;let r={user_id:this.userId,creator_id:this.creatorId,plan_id:this.planId,months:this.selectedMonths};localStorage.setItem("subscriptionData",JSON.stringify(r))}closePopup(){this.isPopupVisible=!1,this.isPaymentConfirmationVisible=!1,localStorage.removeItem("selectedPlan"),localStorage.removeItem("subscriptionData"),this.popupClosed.emit()}redirectToPayPal(){this.redirect.emit()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-subscription"]],outputs:{popupClosed:"popupClosed",redirect:"redirect"},standalone:!0,features:[S],decls:4,vars:2,consts:[["class","popup-overlay",4,"ngIf"],[1,"popup-overlay"],[1,"popup"],[1,"close-button",3,"click"],[1,"summary-item"],["type","number","min","1","max","12",1,"month-input",3,"ngModelChange","input","ngModel"],[1,"payment-method"],["src","assets/images/payments/paypal_logo.png","alt","Paypal",1,"paypal-image"],[1,"secure-text"],[1,"subscribe-button",3,"click"],[1,"support-text"]],template:function(e,t){e&1&&(s(0,"p"),c(1,"Hola"),a(),v(2,Tt,40,8,"div",0)(3,Nt,22,4,"div",0)),e&2&&(l(2),u("ngIf",t.isPopupVisible),l(),u("ngIf",t.isPaymentConfirmationVisible))},dependencies:[R,N,k,rt,T,ct,st,W,Qe],styles:[".popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.popup[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:20px;border-radius:8px;width:400px;box-shadow:0 4px 8px #0003;text-align:center}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:10px 0}.month-input[_ngcontent-%COMP%]{width:50px;text-align:center}.payment-method[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin:20px 0}.paypal-image[_ngcontent-%COMP%]{width:50px;margin:0 5px}.secure-text[_ngcontent-%COMP%]{font-size:12px;color:#888}.subscribe-button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;width:100%;margin-top:10px}.support-text[_ngcontent-%COMP%]{font-size:12px;color:#888;margin-top:10px}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:transparent;border:none;font-size:24px;cursor:pointer;color:#333}.close-button[_ngcontent-%COMP%]:hover{color:#28a745}"]})};var me=class n{baseURL=`${y.baseURL}/subscription`;http=m(w);subscribe(r){return this.http.post(`${this.baseURL}`,r)}isUserSubscribedToCreator(r,e){return this.http.get(`${this.baseURL}/is-subscribed?userId=${r}&creatorId=${e}`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function Dt(n,r){n&1&&(s(0,"h2"),c(1,"Suscribirse"),a())}function Lt(n,r){n&1&&(s(0,"p"),c(1,"Ya est\xE1s suscrito a este creador."),a())}function At(n,r){if(n&1){let e=E();s(0,"div",5)(1,"h3",6),c(2),a(),s(3,"div",7)(4,"span",8),c(5,"$"),a(),c(6),s(7,"span",9),c(8,"/mensual"),a()(),s(9,"p",10),c(10),a(),s(11,"button",11),h("click",function(){let i=x(e).$implicit,o=f(2);return C(o.subscribeToPlan(i))}),c(12,"Suscribirse"),a()()}if(n&2){let e=r.$implicit;l(2),_(e.name),l(4),O("",e.price," "),l(4),_(e.description)}}function Vt(n,r){if(n&1&&(s(0,"div",3),v(1,At,13,3,"div",4),a()),n&2){let e=f();l(),u("ngForOf",e.plans)}}function Bt(n,r){if(n&1){let e=E();s(0,"div")(1,"app-subscription",12),h("popupClosed",function(){x(e);let i=f();return C(i.isPopupVisible=!1)})("redirect",function(){x(e);let i=f();return C(i.startPaymentProcess())}),a()()}}var de=class n{plans=[];isPopupVisible=!1;selectedPlan;isSubscribed=!1;snackBar=m(q);showPlanService=m(le);subscriptionService=m(me);router=m(U);ngOnInit(){this.fetchPlans();let r=JSON.parse(localStorage.getItem("profpost_auth")||"{}"),e=JSON.parse(localStorage.getItem("selectedUser")||"{}");this.checkSubscriptionStatus(r.id,e.userId)}fetchPlans(){this.showPlanService.getPlans().subscribe(r=>{this.plans=r},r=>{this.showSnackBar("Error al cargar los planes")})}showSnackBar(r){this.snackBar.open(r,"Cerrar",{duration:3e3})}subscribeToPlan(r){localStorage.setItem("selectedPlan",JSON.stringify(r)),this.selectedPlan=r,this.isPopupVisible=!0}startPaymentProcess(){this.isPopupVisible=!1,this.router.navigate(["/reader/subscription/checkout"])}checkSubscriptionStatus(r,e){this.subscriptionService.isUserSubscribedToCreator(r,e).subscribe({next:t=>{this.isSubscribed=t,this.isSubscribed?this.showSnackBar("Ya est\xE1s suscrito a este creador"):this.fetchPlans()},error:()=>{this.showSnackBar("Error al verificar suscripci\xF3n")}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-show-plans"]],standalone:!0,features:[S],decls:5,vars:4,consts:[[1,"plans-container"],[4,"ngIf"],["class","plans-grid",4,"ngIf"],[1,"plans-grid"],["class","plan-card",4,"ngFor","ngForOf"],[1,"plan-card"],[1,"plan-name"],[1,"plan-price"],[1,"currency-symbol"],[1,"per-month"],[1,"plan-description"],[1,"subscribe-button",3,"click"],[3,"popupClosed","redirect"]],template:function(e,t){e&1&&(s(0,"div",0),v(1,Dt,2,0,"h2",1)(2,Lt,2,0,"p",1)(3,Vt,2,1,"div",2),a(),v(4,Bt,2,0,"div",1)),e&2&&(l(),u("ngIf",!t.isSubscribed),l(),u("ngIf",t.isSubscribed),l(),u("ngIf",!t.isSubscribed),l(),u("ngIf",t.isPopupVisible))},dependencies:[te,pe,R],styles:[".plans-container[_ngcontent-%COMP%]{text-align:center;font-family:Arial,sans-serif;color:#333;background-color:#e5e8d8}h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:20px}.plans-grid[_ngcontent-%COMP%]{display:flex;gap:20px;flex-wrap:wrap}.plan-card[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:20px;border-radius:8px;width:200px;box-shadow:0 4px 8px #0000001a;transition:transform .3s}.plan-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}h3[_ngcontent-%COMP%]{font-size:1.2rem;margin:0;color:#333}.plan-price[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#000;margin:10px 0}.per-month[_ngcontent-%COMP%]{font-size:1rem;color:#666}.plan-description[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin-bottom:15px}.subscribe-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-weight:700}.subscribe-button[_ngcontent-%COMP%]:hover{background-color:#388e3c}.plan-name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#333;text-align:left}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:transparent;border:none;font-size:24px;cursor:pointer;color:#333}.close-button[_ngcontent-%COMP%]:hover{color:#28a745}"]})};var G=class n{baseURL=`${y.baseURL}/user/profile`;http=m(w);getUserProfile(r){return this.http.get(`${this.baseURL}/${r}`)}updateUserProfile(r,e){return this.http.put(`${this.baseURL}/${r}`,e)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function jt(n,r){if(n&1){let e=E();s(0,"button",13),h("click",function(){x(e);let i=f(2);return C(i.navigateToUpdateProfile())}),c(1," Editar Perfil "),a()}}function zt(n,r){n&1&&g(0,"app-show-plans")}function Ht(n,r){if(n&1){let e=E();s(0,"div",2)(1,"a",3),h("click",function(){x(e);let i=f();return C(i.navigateBack())}),g(2,"i",4),c(3),a(),s(4,"div",5),g(5,"img",6),s(6,"div",7)(7,"h2"),c(8),a(),s(9,"p",8),c(10),a(),s(11,"p",9),c(12),a(),g(13,"br")(14,"br"),v(15,jt,2,0,"button",10),a()(),g(16,"router-outlet"),s(17,"div",11),v(18,zt,1,0,"app-show-plans",12),a()()}if(n&2){let e=f();l(3),O(" ",e.profile.name," "),l(5),_(e.profile.name),l(2),O("Rol: ",e.profile.role,""),l(2),_(e.profile.biography),l(3),u("ngIf",e.isOwnProfile),l(3),u("ngIf",e.isCreatorProfile&&!e.isOwnProfile)}}var Ct=class n{profile;isOwnProfile=!1;isCreatorProfile=!1;userProfileService=m(G);authService=m(ne);router=m(U);snackBar=m(q);route=m(Ze);ngOnInit(){this.loadUserProfile()}loadUserProfile(){let e=this.authService.getUser()?.id;this.route.paramMap.subscribe(t=>{let i=Number(t.get("id"));i?this.userProfileService.getUserProfile(i).subscribe({next:o=>{if(this.profile=o,this.isOwnProfile=o.id===e,this.showSnackBar("Perfil cargado con \xE9xito"),this.isCreatorProfile=o.role==="CREATOR",this.showSnackBar("Perfil cargado con \xE9xito"),this.isCreatorProfile){let p={userName:o.name,userId:o.id};localStorage.setItem("selectedUser",JSON.stringify(p))}},error:o=>{this.showSnackBar("Error al cargar el perfil")}}):e?this.userProfileService.getUserProfile(e).subscribe({next:o=>{this.profile=o,this.isOwnProfile=!0,this.showSnackBar("Perfil cargado con \xE9xito")},error:o=>{this.showSnackBar("Error al cargar el perfil")}}):(this.showSnackBar("Usuario no autenticado"),this.router.navigate(["/auth/login"]))})}navigateToUpdateProfile(){let e=this.authService.getUserRole()==="CREATOR"?"/creator/profile/update":"/reader/profile/update";this.router.navigate([e])}showSnackBar(r){this.snackBar.open(r,"Cerrar",{duration:3e3})}navigateBack(){let r=this.authService.getUserRole();r==="READER"?this.router.navigate(["/reader/search"]):r==="CREATOR"&&this.router.navigate(["/creator/search"]),localStorage.removeItem("selectedUser"),localStorage.removeItem("selectedPlan"),localStorage.removeItem("subscriptionData")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-user-profile"]],standalone:!0,features:[S],decls:2,vars:1,consts:[[1,"container-background"],["class","profile-container",4,"ngIf"],[1,"profile-container"],[1,"back-button",3,"click"],[1,"fas","fa-arrow-left"],[1,"profile-content"],["src","assets/images/usuarios/user1.png","alt","Foto de perfil"],[1,"profile-details"],[1,"role"],[1,"biography"],["class","update-button",3,"click",4,"ngIf"],[1,"plans-section"],[4,"ngIf"],[1,"update-button",3,"click"]],template:function(e,t){e&1&&(s(0,"div",0),v(1,Ht,19,6,"div",1),a()),e&2&&(l(),u("ngIf",t.profile))},dependencies:[Ke,R,et,de],styles:[".container-background[_ngcontent-%COMP%]{background-color:#e5e8d8;min-height:100vh;padding-top:10px;padding-bottom:10px;display:flex;justify-content:center;border-top:2px solid #ffffff;border-bottom:3px solid #ffffff}.profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px;background-color:#e5e8d8;max-width:700px;width:100%;font-family:Arial,sans-serif;box-shadow:0 4px 8px #0000001a;border-radius:8px}.back-button[_ngcontent-%COMP%]{align-self:flex-start;display:flex;align-items:center;font-size:16px;color:#757575;text-decoration:none;margin-bottom:20px}.back-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.profile-content[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:left;background-color:#e5e8d8;padding:20px;border-radius:8px;box-shadow:0 4px 8px #0000001a;position:relative;width:100%}.profile-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;object-fit:cover;margin-right:20px;border:4px solid #f8f9f4}.profile-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#000;margin:0}.role[_ngcontent-%COMP%]{font-size:15px;color:#757575;margin:5px 0 15px}.biography[_ngcontent-%COMP%]{font-size:19px;color:#000;margin-bottom:20px}.update-button[_ngcontent-%COMP%]{background-color:#087443;color:#fff;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease;position:absolute;right:20px;bottom:20px}.update-button[_ngcontent-%COMP%]:hover{background-color:#065c32}.plans-section[_ngcontent-%COMP%]{margin-top:20px;padding:10px;background-color:#e5e8d8;border-radius:8px}"]})};function qt(n,r){n&1&&(s(0,"mat-error"),c(1,"Este campo es obligatorio"),a())}function Yt(n,r){n&1&&(s(0,"mat-error"),c(1,"Este campo es obligatorio"),a())}function Gt(n,r){n&1&&(s(0,"mat-error"),c(1,"Introduzca un correo electr\xF3nico v\xE1lido"),a())}var Pt=class n{profileForm;profile;profileRoute;fb=m(lt);userProfileService=m(G);authService=m(ne);router=m(U);snackBar=m(q);constructor(){this.profileForm=this.fb.group({name:["",[ie.required]],email:["",[ie.required,ie.email]],biography:[""]})}ngOnInit(){this.loadUserProfile()}loadUserProfile(){let e=this.authService.getUser()?.id;e?this.userProfileService.getUserProfile(e).subscribe({next:t=>{this.profile=t,this.profileForm.patchValue(t)},error:t=>{this.showSnackBar("Error al cargar el perfil de usuario")}}):(this.showSnackBar("Usuario no autenticado"),this.router.navigate(["/auth/login"]))}controlHasError(r,e){return this.profileForm.controls[r].hasError(e)}onSubmit(){if(this.profileForm.valid){let r=be(be({},this.profile),this.profileForm.value);this.userProfileService.updateUserProfile(this.profile.id,r).subscribe({next:()=>{this.showSnackBar("Perfil actualizado exitosamente");let t=this.authService.getUserRole()==="CREATOR"?"/creator/profile/list":"/reader/profile";this.router.navigate([t])},error:e=>{this.showSnackBar(e.error?.message||"Error al actualizar el perfil")}})}}showSnackBar(r){this.snackBar.open(r,"Cerrar",{duration:3e3})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-update-profile"]],standalone:!0,features:[S],decls:28,vars:5,consts:[[1,"update-profile-container"],[1,"update-profile-card"],[1,"profile-image-container"],[1,"image-wrapper"],["src","assets/images/usuarios/user1.png","alt","Foto de perfil",1,"profile-image"],[1,"camera-icon"],[1,"fas","fa-camera"],[1,"update-profile-form"],[3,"ngSubmit","formGroup"],[1,"form-field"],["matInput","","formControlName","name","placeholder","Ingrese su nombre"],["matInput","","formControlName","email","type","email","placeholder","Ingrese su correo electr\xF3nico"],["matInput","","formControlName","biography","placeholder","Ingrese su descripci\xF3n"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"]],template:function(e,t){e&1&&(s(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),g(4,"img",4),s(5,"div",5),g(6,"i",6),a()()(),s(7,"div",7)(8,"h2"),c(9,"Editar Perfil"),a(),s(10,"form",8),h("ngSubmit",function(){return t.onSubmit()}),s(11,"mat-form-field",9)(12,"mat-label"),c(13,"Name"),a(),g(14,"input",10),v(15,qt,2,0,"mat-error"),a(),s(16,"mat-form-field",9)(17,"mat-label"),c(18,"Email"),a(),g(19,"input",11),v(20,Yt,2,0,"mat-error")(21,Gt,2,0,"mat-error"),a(),s(22,"mat-form-field",9)(23,"mat-label"),c(24,"Descripci\xF3n"),a(),g(25,"textarea",12),a(),s(26,"button",13),c(27," Guardar "),a()()()()()),e&2&&(l(10),u("formGroup",t.profileForm),l(5),ee(t.controlHasError("name","required")?15:-1),l(5),ee(t.controlHasError("email","required")?20:-1),l(),ee(t.controlHasError("email","email")?21:-1),l(5),u("disabled",t.profileForm.invalid))},dependencies:[dt,mt,ce,se,ae,oe,bt,re,xt,N,it,k,T,nt,pt,ot,at],styles:[".update-profile-container[_ngcontent-%COMP%]{background-color:#e5e8d8;min-height:80vh;padding-top:10px;padding-bottom:10px;display:flex;justify-content:center;border-top:2px solid #ffffff;border-bottom:3px solid #ffffff}.update-profile-card[_ngcontent-%COMP%]{display:flex;background-color:#f8f9f4;padding:20px;border-radius:8px;box-shadow:0 4px 8px #0000001a;max-width:900px;width:100%}.profile-image-container[_ngcontent-%COMP%]{display:flex}.image-wrapper[_ngcontent-%COMP%]{position:relative;width:150px;height:150px}.profile-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;border:4px solid #f8f9f4}.camera-icon[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background-color:#000;color:#fff;border-radius:50%;padding:5px;font-size:18px}.update-profile-form[_ngcontent-%COMP%]{flex:20}.update-profile-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.submit-button[_ngcontent-%COMP%]{background-color:#087443!important;color:#fff!important;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease;width:100%;text-align:center}.submit-button[_ngcontent-%COMP%]:hover{background-color:#065c32!important}"]})};var It=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-playlist"]],standalone:!0,features:[S],decls:2,vars:0,template:function(e,t){e&1&&(s(0,"p"),c(1,"playlist works!"),a())}})};var ue=class n{baseURL=`${y.baseURL}/user/search`;http=m(w);searchUsers(r){return this.http.get(`${this.baseURL}/${r.search}`)}getCreatorId(r){return this.http.get(`${this.baseURL}/creator-id`,{params:{userId:r.toString()}})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qt=n=>["/reader/profile",n];function Kt(n,r){if(n&1&&(s(0,"div",6)(1,"a",7),c(2),a(),s(3,"span",8),c(4),a()()),n&2){let e=r.$implicit;l(),u("routerLink",Ye(3,Qt,e.id)),l(),_(e.name),l(2),_(e.role)}}function Xt(n,r){if(n&1&&(s(0,"div",4),v(1,Kt,5,5,"div",5),a()),n&2){let e=f();l(),u("ngForOf",e.results)}}var wt=class n{constructor(r,e){this.userSearchService=r;this.router=e}search="";results=[];onSearch(){if(this.search.trim()){let r={search:this.search};this.userSearchService.searchUsers(r).subscribe(e=>{this.results=e},e=>{console.log(e),this.results=[]})}else this.results=[]}viewUserProfile(r){this.router.navigate(["/user/profile",r])}static \u0275fac=function(e){return new(e||n)(M(ue),M(U))};static \u0275cmp=b({type:n,selectors:[["app-searcher"]],standalone:!0,features:[S],decls:7,vars:2,consts:[[1,"search-container"],[1,"search-box"],["type","text","placeholder","Buscar usuario...",3,"ngModelChange","input","ngModel"],["class","results-container",4,"ngIf"],[1,"results-container"],["class","result-item",4,"ngFor","ngForOf"],[1,"result-item"],[3,"routerLink"],[1,"role"]],template:function(e,t){e&1&&(s(0,"body")(1,"div",0)(2,"h2"),c(3,"Buscar"),a(),s(4,"div",1)(5,"input",2),$("ngModelChange",function(o){return H(t.search,o)||(t.search=o),o}),h("input",function(){return t.onSearch()}),a()(),v(6,Xt,2,1,"div",3),a()()),e&2&&(l(5),z("ngModel",t.search),l(),u("ngIf",t.results.length>0))},dependencies:[N,k,T,W,R,te,tt],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;background-color:#e3e6d3;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0}.search-container[_ngcontent-%COMP%]{text-align:center;width:400px;margin-top:-500px}.search-box[_ngcontent-%COMP%]{position:relative;margin:0 auto 20px;width:100%}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px;font-size:16px;border:1px solid #ccc;border-radius:8px;box-shadow:2px 2px 10px #0000001a}.results-container[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;box-shadow:2px 2px 10px #0000001a}.result-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee}.result-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.name[_ngcontent-%COMP%]{font-weight:700;color:#333}.role[_ngcontent-%COMP%]{color:#777}"]})};var en=["*"],fe;function tn(){if(fe===void 0&&(fe=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(fe=n.trustedTypes.createPolicy("angular#components",{createHTML:r=>r}))}return fe}function Q(n){return tn()?.createHTML(n)||n}function yt(n){return Error(`Unable to find icon with the name "${n}"`)}function nn(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function Mt(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Et(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var F=class{constructor(r,e,t){this.url=r,this.svgText=e,this.options=t}},rn=(()=>{class n{constructor(e,t,i,o){this._httpClient=e,this._sanitizer=t,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(e,t,i){return this.addSvgIconInNamespace("",e,t,i)}addSvgIconLiteral(e,t,i){return this.addSvgIconLiteralInNamespace("",e,t,i)}addSvgIconInNamespace(e,t,i,o){return this._addSvgIconConfig(e,t,new F(i,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,t,i,o){let p=this._sanitizer.sanitize(j.HTML,i);if(!p)throw Et(i);let d=Q(p);return this._addSvgIconConfig(e,t,new F("",d,o))}addSvgIconSet(e,t){return this.addSvgIconSetInNamespace("",e,t)}addSvgIconSetLiteral(e,t){return this.addSvgIconSetLiteralInNamespace("",e,t)}addSvgIconSetInNamespace(e,t,i){return this._addSvgIconSetConfig(e,new F(t,null,i))}addSvgIconSetLiteralInNamespace(e,t,i){let o=this._sanitizer.sanitize(j.HTML,t);if(!o)throw Et(t);let p=Q(o);return this._addSvgIconSetConfig(e,new F("",p,i))}registerFontClassAlias(e,t=e){return this._fontCssClassesByAlias.set(e,t),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let t=this._sanitizer.sanitize(j.RESOURCE_URL,e);if(!t)throw Mt(e);let i=this._cachedIconsByUrl.get(t);return i?V(he(i)):this._loadSvgIconFromConfig(new F(e,null)).pipe(X(o=>this._cachedIconsByUrl.set(t,o)),B(o=>he(o)))}getNamedSvgIcon(e,t=""){let i=Ot(t,e),o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(t,e),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);let p=this._iconSetConfigs.get(t);return p?this._getSvgFromIconSetConfigs(e,p):ye(yt(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?V(he(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(B(t=>he(t)))}_getSvgFromIconSetConfigs(e,t){let i=this._extractIconWithNameFromAnySet(e,t);if(i)return V(i);let o=t.filter(p=>!p.svgText).map(p=>this._loadSvgIconSetFromConfig(p).pipe(Ee(d=>{let A=`Loading icon set URL: ${this._sanitizer.sanitize(j.RESOURCE_URL,p.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(A)),V(null)})));return Me(o).pipe(B(()=>{let p=this._extractIconWithNameFromAnySet(e,t);if(!p)throw yt(e);return p}))}_extractIconWithNameFromAnySet(e,t){for(let i=t.length-1;i>=0;i--){let o=t[i];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let p=this._svgElementFromConfig(o),d=this._extractSvgIconFromSet(p,e,o.options);if(d)return d}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(X(t=>e.svgText=t),B(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?V(null):this._fetchIcon(e).pipe(X(t=>e.svgText=t))}_extractSvgIconFromSet(e,t,i){let o=e.querySelector(`[id="${t}"]`);if(!o)return null;let p=o.cloneNode(!0);if(p.removeAttribute("id"),p.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(p,i);if(p.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(p),i);let d=this._svgElementFromString(Q("<svg></svg>"));return d.appendChild(p),this._setSvgAttributes(d,i)}_svgElementFromString(e){let t=this._document.createElement("DIV");t.innerHTML=e;let i=t.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){let t=this._svgElementFromString(Q("<svg></svg>")),i=e.attributes;for(let o=0;o<i.length;o++){let{name:p,value:d}=i[o];p!=="id"&&t.setAttribute(p,d)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[o].cloneNode(!0));return t}_setSvgAttributes(e,t){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),t&&t.viewBox&&e.setAttribute("viewBox",t.viewBox),e}_fetchIcon(e){let{url:t,options:i}=e,o=i?.withCredentials??!1;if(!this._httpClient)throw nn();if(t==null)throw Error(`Cannot fetch icon from URL "${t}".`);let p=this._sanitizer.sanitize(j.RESOURCE_URL,t);if(!p)throw Mt(t);let d=this._inProgressUrlFetches.get(p);if(d)return d;let L=this._httpClient.get(p,{responseType:"text",withCredentials:o}).pipe(B(A=>Q(A)),Fe(()=>this._inProgressUrlFetches.delete(p)),Re());return this._inProgressUrlFetches.set(p,L),L}_addSvgIconConfig(e,t,i){return this._svgIconConfigs.set(Ot(e,t),i),this}_addSvgIconSetConfig(e,t){let i=this._iconSetConfigs.get(e);return i?i.push(t):this._iconSetConfigs.set(e,[t]),this}_svgElementFromConfig(e){if(!e.svgElement){let t=this._svgElementFromString(e.svgText);this._setSvgAttributes(t,e.options),e.svgElement=t}return e.svgElement}_getIconConfigFromResolvers(e,t){for(let i=0;i<this._resolvers.length;i++){let o=this._resolvers[i](t,e);if(o)return on(o)?new F(o.url,null,o.options):new F(o,null)}}static{this.\u0275fac=function(t){return new(t||n)(D(w,8),D(Xe),D(Ce,8),D(Z))}}static{this.\u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function he(n){return n.cloneNode(!0)}function Ot(n,r){return n+":"+r}function on(n){return!!(n.url&&n.options)}var an=new ve("MAT_ICON_DEFAULT_OPTIONS"),sn=new ve("mat-icon-location",{providedIn:"root",factory:cn});function cn(){let n=m(Ce),r=n?n.location:null;return{getPathname:()=>r?r.pathname+r.search:""}}var Ft=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ln=Ft.map(n=>`[${n}]`).join(", "),pn=/^url\(['"]?#(.*?)['"]?\)$/,Rt=(()=>{class n{get color(){return this._color||this._defaultColor}set color(e){this._color=e}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){let t=this._cleanupFontValue(e);t!==this._fontSet&&(this._fontSet=t,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){let t=this._cleanupFontValue(e);t!==this._fontIcon&&(this._fontIcon=t,this._updateFontIconClasses())}constructor(e,t,i,o,p,d){this._elementRef=e,this._iconRegistry=t,this._location=o,this._errorHandler=p,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=we.EMPTY,d&&(d.color&&(this.color=this._defaultColor=d.color),d.fontSet&&(this.fontSet=d.fontSet)),i||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let t=this._location.getPathname();this._previousPath=t,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(t),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,t=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();t--;){let i=e.childNodes[t];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,t=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>e.classList.remove(i)),t.forEach(i=>e.classList.add(i)),this._previousFontSetClass=t,this.fontIcon!==this._previousFontIconClass&&!t.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let t=this._elementsWithExternalReferences;t&&t.forEach((i,o)=>{i.forEach(p=>{o.setAttribute(p.name,`url('${e}#${p.value}')`)})})}_cacheChildrenWithExternalReferences(e){let t=e.querySelectorAll(ln),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<t.length;o++)Ft.forEach(p=>{let d=t[o],L=d.getAttribute(p),A=L?L.match(pn):null;if(A){let K=i.get(d);K||(K=[],i.set(d,K)),K.push({name:p,value:A[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[t,i]=this._splitIconName(e);t&&(this._svgNamespace=t),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,t).pipe(Oe(1)).subscribe(o=>this._setSvgElement(o),o=>{let p=`Error retrieving icon ${t}:${i}! ${o.message}`;this._errorHandler.handleError(new Error(p))})}}static{this.\u0275fac=function(t){return new(t||n)(M(De),M(rn),Ne("aria-hidden"),M(sn),M(Z),M(an,8))}}static{this.\u0275cmp=b({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(t,i){t&2&&(Ve("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),je(i.color?"mat-"+i.color:""),Be("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Je],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Ae,S],ngContentSelectors:en,decls:1,vars:0,template:function(t,i){t&1&&(We(),qe(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return n})(),Ut=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=ke({type:n})}static{this.\u0275inj=Ue({imports:[Pe,Pe]})}}return n})();var ge=class n{constructor(r){this.http=r}baseURL=`${y.baseURL}/publications`;getRecentPublications(){return this.http.get(`${this.baseURL}/recent`)}static \u0275fac=function(e){return new(e||n)(D(w))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var _e=class n{transform(r){return`${y.baseURL}/media/${r}`}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=Te({name:"apiImg",type:n,pure:!0,standalone:!0})};function dn(n,r){if(n&1&&(s(0,"mat-card",6)(1,"mat-card-header")(2,"mat-card-title"),c(3),a(),s(4,"mat-card-subtitle"),c(5),a()(),s(6,"mat-card-content")(7,"p"),c(8),a(),s(9,"p"),c(10),a()(),g(11,"img",7),J(12,"apiImg"),a()),n&2){let e=r.$implicit;l(3),_(e.title),l(2),_(e.creatorname),l(3),_(e.content),l(2),_(e.video_url),l(),u("src",Ge(12,6,e.filePath),Le)("alt",e.title)}}function un(n,r){n&1&&(s(0,"p"),c(1,"No se encontraron Publicaciones"),a())}var kt=class n{recentPublications=[];filteredPublications=[];searchQuery="";publicationService=m(ge);ngOnInit(){this.publicationService.getRecentPublications().subscribe({next:r=>{this.recentPublications=r,this.filteredPublications=r},error:r=>console.error("Error al cargar las publciaciones recientes",r)})}onSearch(){let r=this.searchQuery.toLowerCase();this.filteredPublications=this.recentPublications.filter(e=>e.title.toLowerCase().includes(r)||e.creatorname.toLowerCase().includes(r))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-home"]],standalone:!0,features:[S],decls:13,vars:2,consts:[[1,"content-wrapper"],[1,"search-container"],["appearance","outline",1,"search-bar"],["matInput","","placeholder","Busca por t\xEDtulo o creador",3,"ngModelChange","ngModel"],["mat-icon-button","","matSuffix","",1,"search-button"],[1,"publication-list"],[1,"publication-card"],[1,"mat-card-image",3,"src","alt"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),c(4,"Buscar Publicaciones"),a(),s(5,"input",3),$("ngModelChange",function(o){return H(t.searchQuery,o)||(t.searchQuery=o),o}),h("ngModelChange",function(){return t.onSearch()}),a(),s(6,"button",4)(7,"mat-icon"),c(8,"search"),a()()()(),s(9,"div",5),He(10,dn,13,8,"mat-card",6,ze,!1,un,2,0,"p"),a()()),e&2&&(l(5),z("ngModel",t.searchQuery),l(5),$e(t.filteredPublications))},dependencies:[re,ut,ht,_t,gt,ft,St,ae,oe,vt,ce,se,Ut,Rt,N,k,T,W,_e],styles:[".content-wrapper[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:20px;display:flex;flex-direction:column;gap:20px}.search-bar[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]{background-color:transparent;border:none}.search-bar[_ngcontent-%COMP%]{width:100%;max-width:800px}.publication-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.publication-card[_ngcontent-%COMP%]{width:100%;background-color:#fff;border-radius:10px;box-shadow:0 4px 8px #0003;transition:transform .3s ease}.publication-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;color:#333}mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:.9em;color:#666}mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;line-height:1.5;color:#444}.mat-card-image[_ngcontent-%COMP%]{max-height:400px;max-width:300%;display:block;margin:10px;object-fit:cover;border-radius:10px}"]})};export{me as a,de as b,Ct as c,Pt as d,It as e,ue as f,wt as g,kt as h};
