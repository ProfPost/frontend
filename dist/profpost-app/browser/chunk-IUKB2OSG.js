import{O as k,Q as q,W as G,X as E,Y as F,a as ie,aa as R,b as ae,c as C,ca as O,d,da as V,f as v,g as _,j as x,l as M,m as S,oa as y,p as w,pa as A,q as D,r as P}from"./chunk-WTALAJB6.js";import{a as te,g as oe,h as re,i as h,j as L,n as ne,p as T}from"./chunk-TCVV5XCJ.js";import"./chunk-Q64FFBLU.js";import{Ab as Z,Db as b,Dc as ee,Fb as K,Qb as i,Wa as s,Xb as f,Z as W,da as m,ha as g,lb as u,pb as c,qa as X,ra as Y,tb as p,xb as n,yb as t,zb as l}from"./chunk-5B7RBOYN.js";var H=class o{static \u0275fac=function(r){return new(r||o)};static \u0275cmp=g({type:o,selectors:[["app-auth-layout"]],standalone:!0,features:[f],decls:4,vars:0,template:function(r,a){r&1&&(l(0,"app-navbar"),n(1,"div"),l(2,"router-outlet"),t(),l(3,"app-footer"))},dependencies:[ie,ae,re]})};function ce(o,e){o&1&&(n(0,"mat-error"),i(1,"Este campo es obligatorio"),t())}function pe(o,e){o&1&&(n(0,"mat-error"),i(1,"Introduzca un correo electr\xF3nico v\xE1lido."),t())}function de(o,e){o&1&&(n(0,"mat-error"),i(1,"Este campo es obligatorio"),t())}function ue(o,e){o&1&&(n(0,"mat-error"),i(1,"La contrase\xF1a debe tener al menos 6 caracteres"),t())}var j=class o{loginForm;fb=m(w);router=m(h);snackBar=m(y);authService=m(T);constructor(){this.loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required]]})}controlHasError(e,r){return this.loginForm.controls[e].hasError(r)}onSubmit(){if(this.loginForm.invalid)return;let e=this.loginForm.value;this.authService.login(e).subscribe({next:r=>{this.showSnackBar("Inicio de Sesi\xF3n Existoso"),r.role==="READER"?this.router.navigate(["/reader/publications-catalog"]):r.role==="CREATOR"&&this.router.navigate(["/creator/publications-catalog"])},error:()=>{this.showSnackBar("Error en el inicio de sesi\xF3n. Por favor, intenta de nuevo.")}})}showSnackBar(e){this.snackBar.open("Login Successful","Close",{duration:2e3,verticalPosition:"top"})}getUserRole(){let e=localStorage.getItem("profpost_auth");return e||"READER"}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=g({type:o,selectors:[["app-login"]],standalone:!0,features:[f],decls:26,vars:6,consts:[[1,"main-container"],[1,"image-container"],["src","assets/images/intro-nav/logo.png","alt","ProfPost Logo",1,"mb-4"],[1,"login-container"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["appearance","outline",1,"form-input"],["matInput","","formControlName","email","placeholder","Introduce tu correo"],["matInput","","formControlName","password","type","password","placeholder","Introduce tu contrase\xF1a"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"],[1,"register-link"],["routerLink","/auth/register"],["routerLink","/auth/reset-password"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"div",1),l(2,"img",2),t(),n(3,"div",3)(4,"form",4),b("ngSubmit",function(){return a.onSubmit()}),n(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),i(8,"Correo Electr\xF3nico"),t(),l(9,"input",7),u(10,ce,2,0,"mat-error")(11,pe,2,0,"mat-error"),t()(),n(12,"div",5)(13,"mat-form-field",6)(14,"mat-label"),i(15,"Contrase\xF1a"),t(),l(16,"input",8),u(17,de,2,0,"mat-error")(18,ue,2,0,"mat-error"),t()(),n(19,"button",9),i(20," Iniciar Sesi\xF3n "),t()(),n(21,"p",10)(22,"a",11),i(23,"Registrarse"),t(),n(24,"a",12),i(25,"Recuperar Contrase\xF1a"),t()()()()),r&2&&(s(4),c("formGroup",a.loginForm),s(6),p(a.controlHasError("email","required")?10:-1),s(),p(a.controlHasError("email","email")?11:-1),s(6),p(a.controlHasError("password","required")?17:-1),s(),p(a.controlHasError("password","minlength")?18:-1),s(),c("disabled",a.loginForm.invalid))},dependencies:[D,x,C,v,_,P,M,S,V,O,R,E,F,G,A,q,k,L],styles:[".main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-height:calc(100vh - 120px);padding-top:1rem;background-color:#f8f9f4;padding-bottom:1rem}.image-container[_ngcontent-%COMP%]{width:100%;background-color:#f8f9f4;text-align:center}.mb-4[_ngcontent-%COMP%]{width:150px}.login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1.5rem;max-width:350px;background-color:#e5e8d8;border-radius:8px;box-shadow:0 4px 8px #0000001a;text-align:center}.login-header[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#333;margin-bottom:.5rem}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-input[_ngcontent-%COMP%], .mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-label[_ngcontent-%COMP%]{color:#757575}[_ngcontent-%COMP%]::placeholder{color:#757575;font-style:italic}.submit-button[_ngcontent-%COMP%]{background-color:#087443!important;color:#fff!important;width:100%;padding:10px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease;margin-bottom:10px}.submit-button[_ngcontent-%COMP%]:hover{background-color:#065c32!important}.register-link[_ngcontent-%COMP%]{margin-top:15px;font-size:14px;text-align:center}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none;display:block;margin:5px 0}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};function ge(o,e){o&1&&(n(0,"mat-error"),i(1,"Este campo es obligatorio"),t())}function fe(o,e){o&1&&(n(0,"mat-error"),i(1,"Este campo es obligatorio"),t())}function be(o,e){o&1&&(n(0,"mat-error"),i(1,"Introduzca un correo electr\xF3nico v\xE1lido."),t())}function he(o,e){o&1&&(n(0,"mat-error"),i(1,"Este campo es obligatorio"),t())}function Ce(o,e){o&1&&(n(0,"mat-error"),i(1,"La contrase\xF1a debe tener al menos 6 caracteres"),t())}var U=class o{registerForm;fb=m(w);router=m(h);snackBar=m(y);authService=m(T);constructor(){this.registerForm=this.fb.group({name:["",[d.required]],email:["",[d.required,d.email]],password:["",[d.required]]})}controlHasError(e,r){return this.registerForm.controls[e].hasError(r)}onSubmit(){if(this.registerForm.valid){let e=this.registerForm.value;this.authService.register(e).subscribe({next:()=>{this.showSnackBar("Usuario creado correctamente"),this.router.navigate(["/auth/login"])},error:r=>{this.showSnackBar(r.error.message)}})}}showSnackBar(e){this.snackBar.open(e,"Cerrar",{duration:3e3})}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=g({type:o,selectors:[["app-register"]],standalone:!0,features:[f],decls:30,vars:7,consts:[[1,"main-container"],[1,"image-container"],["src","assets/images/intro-nav/logo.png","alt","ProfPost Logo",1,"mb-4"],[1,"register-container"],[1,"register-form",3,"ngSubmit","formGroup"],[1,"form-group"],["appearance","outline",1,"form-input"],["matInput","","formControlName","name","placeholder","Introduce tu nombre"],["matInput","","formControlName","email","placeholder","Introduce tu correo"],["matInput","","formControlName","password","type","password","placeholder","Introduce tu contrase\xF1a"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"],[1,"login-link"],["routerLink","/auth/login"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"div",1),l(2,"img",2),t(),n(3,"div",3)(4,"form",4),b("ngSubmit",function(){return a.onSubmit()}),n(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),i(8,"Usuario"),t(),l(9,"input",7),u(10,ge,2,0,"mat-error"),t()(),n(11,"div",5)(12,"mat-form-field",6)(13,"mat-label"),i(14,"Correo Electr\xF3nico"),t(),l(15,"input",8),u(16,fe,2,0,"mat-error")(17,be,2,0,"mat-error"),t()(),n(18,"div",5)(19,"mat-form-field",6)(20,"mat-label"),i(21,"Contrase\xF1a"),t(),l(22,"input",9),u(23,he,2,0,"mat-error")(24,Ce,2,0,"mat-error"),t()(),n(25,"button",10),i(26," Registrarse "),t()(),n(27,"p",11)(28,"a",12),i(29,"Inicia sesi\xF3n aqu\xED"),t()()()()),r&2&&(s(4),c("formGroup",a.registerForm),s(6),p(a.controlHasError("name","required")?10:-1),s(6),p(a.controlHasError("email","required")?16:-1),s(),p(a.controlHasError("email","email")?17:-1),s(6),p(a.controlHasError("password","required")?23:-1),s(),p(a.controlHasError("password","minlength")?24:-1),s(),c("disabled",a.registerForm.invalid))},dependencies:[D,x,C,v,_,P,M,S,V,O,R,E,F,G,A,q,k,L],styles:[".main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-height:calc(100vh - 120px);padding-top:1rem;background-color:#f8f9f4;padding-bottom:1rem}.image-container[_ngcontent-%COMP%]{width:100%;background-color:#f8f9f4;text-align:center}.mb-4[_ngcontent-%COMP%]{width:150px}.register-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1.5rem;max-width:350px;background-color:#e5e8d8;border-radius:8px;box-shadow:0 4px 8px #0000001a;text-align:center}.register-header[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#333;margin-bottom:.5rem}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-input[_ngcontent-%COMP%], .mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-label[_ngcontent-%COMP%]{color:#757575}[_ngcontent-%COMP%]::placeholder{color:#757575;font-style:italic}.submit-button[_ngcontent-%COMP%]{background-color:#087443!important;color:#fff!important;width:100%;padding:10px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease;margin-bottom:10px}.submit-button[_ngcontent-%COMP%]:hover{background-color:#065c32!important}.login-link[_ngcontent-%COMP%]{margin-top:15px;font-size:14px}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var I=class o{baseURL=`${ne.baseURL}/mail`;http=m(te);sendResetPasswordEmail(e){return this.http.post(`${this.baseURL}/sendMail`,e)}checkTokenValidity(e){return this.http.get(`${this.baseURL}/reset/check/${e}`)}resetPassword(e,r){return this.http.post(`${this.baseURL}/reset/${e}`,r)}static \u0275fac=function(r){return new(r||o)};static \u0275prov=W({token:o,factory:o.\u0275fac,providedIn:"root"})};function ve(o,e){o&1&&(n(0,"mat-error"),i(1,"Este campo es obligatorio"),t())}function _e(o,e){if(o&1){let r=Z();n(0,"form",6),b("ngSubmit",function(){X(r);let N=K();return Y(N.onSubmit())}),n(1,"mat-form-field",7)(2,"mat-label"),i(3,"Nueva Contrase\xF1a"),t(),l(4,"input",8),u(5,ve,2,0,"mat-error",9),t(),n(6,"button",10),i(7," Cambiar Contrase\xF1a "),t()()}if(o&2){let r,a=K();c("formGroup",a.resetForm),s(5),c("ngIf",(r=a.resetForm.get("password"))==null?null:r.hasError("required")),s(),c("disabled",a.resetForm.invalid)}}var $=class o{resetForm;token="";tokenValid=!1;fb=m(w);router=m(h);route=m(oe);snackBar=m(y);passwordResetService=m(I);constructor(){this.resetForm=this.fb.group({password:["",[d.required]]})}ngOnInit(){this.token=this.route.snapshot.params.token,this.checkToken()}onSubmit(){if(this.resetForm.invalid)return;let e=this.resetForm.value.password;this.passwordResetService.resetPassword(this.token,e).subscribe({next:()=>{this.snackBar.open("Contrase\xF1a cambiada correctamente.","Cerrar",{duration:3e3}),this.router.navigate(["/auth/login"])},error:()=>{this.snackBar.open("Error al cambiar la contrase\xF1a. Por favor, intenta de nuevo.","Cerrar",{duration:3e3})}})}showSnackBar(e){this.snackBar.open(e,"Cerrar",{duration:3e3,verticalPosition:"top"})}checkToken(){this.passwordResetService.checkTokenValidity(this.token).subscribe({next:e=>{this.tokenValid=e,this.tokenValid||(this.snackBar.open("El enlace ha expirado. Por favor, solicita un nuevo enlace.","Cerrar",{duration:3e3}),this.router.navigate(["/auth/reset-password"]))},error:()=>{this.snackBar.open("Error al verificar el enlace. Por favor, intenta de nuevo.","Cerrar",{duration:3e3}),this.router.navigate(["/auth/reset-password"])}})}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=g({type:o,selectors:[["app-reset-password"]],standalone:!0,features:[f],decls:7,vars:1,consts:[[1,"password-reset-container"],[1,"image-container"],["src","/assets/images/intro-nav/logo.png","alt","ProfPost Logo",1,"mb-4"],[1,"reset-container"],[1,"reset-header"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"form-input"],["matInput","","formControlName","password","type","password","placeholder","Introduce tu nueva contrase\u5358a"],[4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"div",1),l(2,"img",2),t(),n(3,"div",3)(4,"h2",4),i(5,"Cambiar Contrase\xF1a"),t(),u(6,_e,8,3,"form",5),t()()),r&2&&(s(6),c("ngIf",a.tokenValid))},dependencies:[P,x,C,v,_,M,S,R,E,O,F,k,ee],styles:[".password-reset-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-height:calc(100vh - 120px);padding-top:1rem;background-color:#f8f9f4;padding-bottom:1rem}.reset-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1.5rem;max-width:350px;background-color:#e5e8d8;border-radius:8px;box-shadow:0 4px 8px #0000001a;text-align:center}.mb-4[_ngcontent-%COMP%]{width:150px}h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:1rem}.reset-header[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#333;margin-bottom:.5rem}.form-input[_ngcontent-%COMP%]{width:100%}.submit-button[_ngcontent-%COMP%]{background-color:#087443!important;color:#fff!important;width:100%;padding:10px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease;margin-top:10px}.submit-button[_ngcontent-%COMP%]:hover{background-color:#065c32!important}"]})};function xe(o,e){o&1&&(n(0,"mat-error"),i(1,"Este campo es obligatorio"),t())}function Me(o,e){o&1&&(n(0,"mat-error"),i(1,"Introduce un correo v\xE1lido"),t())}var J=class o{resetForm;fb=m(w);router=m(h);snackBar=m(y);passwordResetService=m(I);constructor(){this.resetForm=this.fb.group({email:["",[d.required,d.email]]})}controlHasError(e,r){return this.resetForm.controls[e].hasError(r)}onSubmit(){if(this.resetForm.invalid)return;let e=this.resetForm.value.email;this.passwordResetService.sendResetPasswordEmail(e).subscribe({next:()=>{this.showSnackBar("Si el correo est\xE1 registrado, recibir\xE1s un enlace para restablecer la contrase\xF1a")},error:()=>{this.showSnackBar("Error al enviar el correo. Int\xE9ntalo nuevamente")}})}showSnackBar(e){this.snackBar.open(e,"Cerrar",{duration:3e3,verticalPosition:"top"})}goToLogin(){this.router.navigate(["/auth/login"])}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=g({type:o,selectors:[["app-reset-password"]],standalone:!0,features:[f],decls:19,vars:4,consts:[[1,"main-container"],[1,"image-container"],["src","/assets/images/intro-nav/logo.png","alt","ProfPost Logo",1,"mb-4"],[1,"reset-container"],[1,"reset-header"],[1,"reset-form",3,"ngSubmit","formGroup"],[1,"form-group"],["appearance","outline",1,"form-input"],["matInput","","formControlName","email","placeholder","Introduce tu correo"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"],[1,"back-to-login"],["mat-button","","color","accent",3,"click"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"div",1),l(2,"img",2),t(),n(3,"div",3)(4,"h2",4),i(5,"Recuperar Contrase\xF1a"),t(),n(6,"form",5),b("ngSubmit",function(){return a.onSubmit()}),n(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),i(10,"Correo Electr\xF3nico"),t(),l(11,"input",8),u(12,xe,2,0,"mat-error")(13,Me,2,0,"mat-error"),t()(),n(14,"button",9),i(15,"Enviar Correo"),t()(),n(16,"p",10)(17,"button",11),b("click",function(){return a.goToLogin()}),i(18,"Regresar"),t()()()()),r&2&&(s(6),c("formGroup",a.resetForm),s(6),p(a.controlHasError("email","required")?12:-1),s(),p(a.controlHasError("email","email")?13:-1),s(),c("disabled",a.resetForm.invalid))},dependencies:[P,x,C,v,_,M,S,R,E,O,F,k],styles:[".main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-height:calc(100vh - 120px);padding-top:1rem;background-color:#f8f9f4;padding-bottom:1rem}.image-container[_ngcontent-%COMP%]{width:100%;background-color:#f8f9f4;text-align:center}.mb-4[_ngcontent-%COMP%]{width:150px}.reset-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1.5rem;max-width:350px;background-color:#e5e8d8;border-radius:8px;box-shadow:0 4px 8px #0000001a;text-align:center}.reset-header[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#333;margin-bottom:.5rem}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-input[_ngcontent-%COMP%], .mat-form-field[_ngcontent-%COMP%]{width:100%}[_ngcontent-%COMP%]::placeholder{color:#757575;font-style:italic}.submit-button[_ngcontent-%COMP%]{background-color:#087443!important;color:#fff!important;width:100%;padding:10px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease;margin-bottom:10px}.submit-button[_ngcontent-%COMP%]:hover{background-color:#065c32!important}.back-to-login[_ngcontent-%COMP%]{margin-top:15px}.back-to-login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#000;text-decoration:none}.back-to-login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var yt=[{path:"",component:H,children:[{path:"login",component:j},{path:"register",component:U},{path:"reset-password",component:J},{path:"forgot/:token",component:$}]}];export{yt as authroutes};
